{"version":3,"file":"tram-spec.js","sources":["specs/tram-spec.js"],"sourcesContent":["const Tram = window['tram-one']\nconst testemPath = window.location.pathname\n\ndescribe('Tram', () => {\n  let app\n  const errorPage = () => Tram.html()`<div>Error</div>`\n  const successPage = () => Tram.html()`<div>Noraml Page</div>`\n  const queryablePage = (value) => Tram.html()`<div id=\"tram_container\">${value}</div>`\n  const queryableSelector = '#tram_container'\n\n  const counterReducer = (state, action) => {\n    if (action.type === 'add') {\n      return state + 1\n    }\n    return state\n  }\n  const counterPage = (state) => Tram.html()`${state.counter}`\n  const queryableCounterPage = (state) => Tram.html()`<div id=\"tram_container\">${state.counter}</div>`\n  const counterState = 2\n\n  describe('constructor', () => {\n    it('should have a default route', () => {\n      app = new Tram()\n\n      app.addRoute('/404', errorPage)\n      expect(app.toString('/')).toEqual(errorPage().outerHTML)\n    })\n\n    it('should take in a default route', () => {\n      app = new Tram({defaultRoute: '/200'})\n\n      app.addRoute('/200', successPage)\n      expect(app.toString('/')).toEqual(successPage().outerHTML)\n    })\n\n    it('should not always go to the default', () => {\n      app = new Tram()\n\n      app.addRoute('/404', errorPage)\n      app.addRoute('/200', successPage)\n      expect(app.toString('/200')).not.toEqual(errorPage().outerHTML)\n    })\n  })\n\n  describe('addReducer', () => {\n    it('should include reducer in app', () => {\n      app = new Tram()\n      app.addReducer('counter', counterReducer, {})\n      expect(app.reducers['counter']).toEqual(counterReducer)\n    })\n\n    it('should include state in app', () => {\n      app = new Tram()\n      app.addReducer('counter', counterReducer, counterState)\n      expect(app.state['counter']).toEqual(counterState)\n    })\n  })\n\n  describe('addRoute', () => {\n    it('should handle new routes in the app', () => {\n      app = new Tram()\n      app.addRoute('/', successPage)\n      app.addRoute('/good', successPage)\n      app.addRoute('/bad', errorPage)\n      app.addRoute('/404', errorPage)\n      expect(app.toString('/')).toEqual(successPage().outerHTML)\n      expect(app.toString('/good')).toEqual(successPage().outerHTML)\n      expect(app.toString('/bad')).toEqual(errorPage().outerHTML)\n      expect(app.toString('/404')).toEqual(errorPage().outerHTML)\n    })\n\n    it('should include the default state in app', () => {\n      app = new Tram()\n      app.addRoute('/', counterPage)\n      app.addReducer('counter', counterReducer, counterState)\n      expect(app.toNode('/')).toEqual(counterState)\n    })\n\n    it('should pass in path params in app', () => {\n      app = new Tram()\n      app.addRoute('/:path_param',\n        (state) => Tram.html()`${state.path_param}`\n      )\n      expect(app.toNode('/foo')).toEqual('foo')\n    })\n  })\n\n  describe('start', () => {\n    beforeEach(() => {\n      const childDiv = document.createElement('div')\n      childDiv.id = 'tram_test_container'\n      document.body.appendChild(childDiv)\n    })\n\n    afterEach(() => {\n      const childDiv = document.getElementById('tram_test_container')\n      document.body.removeChild(childDiv)\n    })\n\n    it('should mount the app to the target', () => {\n      app = new Tram()\n      app.addReducer('counter', counterReducer, counterState)\n      app.addRoute(testemPath, queryableCounterPage)\n      app.start('#tram_test_container')\n      const mountedTarget = document.querySelector(queryableSelector)\n\n      expect(mountedTarget.innerHTML).toEqual('2')\n    })\n\n    it('should update the app on state change', () => {\n      app = new Tram()\n      app.addReducer('counter', counterReducer, counterState)\n      app.addRoute(testemPath, queryableCounterPage)\n      app.start('#tram_test_container')\n      app.store.dispatch({type: 'add'})\n      const mountedTarget = document.querySelector(queryableSelector)\n\n      expect(mountedTarget.innerHTML).toEqual('3')\n    })\n  })\n\n  describe('mount', () => {\n    beforeEach(() => {\n      const childDiv = document.createElement('div')\n      childDiv.id = 'tram_test_container'\n      document.body.appendChild(childDiv)\n    })\n\n    afterEach(() => {\n      const childDiv = document.getElementById('tram_test_container')\n      document.body.removeChild(childDiv)\n    })\n\n    it('should attach the app to a node', () => {\n      app = new Tram()\n\n      app.addRoute('/', queryablePage)\n      const target = document.getElementById('tram_test_container')\n      app.mount(target, '/')\n      const mountedTarget = document.querySelector(queryableSelector)\n      expect(mountedTarget.outerHTML).toEqual(queryablePage().outerHTML)\n    })\n\n    it('should use the default route', () => {\n      app = new Tram()\n\n      app.addRoute('/', queryablePage)\n      app.addRoute(testemPath, queryablePage.bind(window, 200))\n      const target = document.getElementById('tram_test_container')\n      app.mount(target)\n      const mountedTarget = document.querySelector(queryableSelector)\n      expect(mountedTarget.outerHTML).toEqual(queryablePage(200).outerHTML)\n    })\n\n    it('should attach the app to a selector', () => {\n      app = new Tram()\n\n      app.addRoute('/', queryablePage)\n      app.mount('#tram_test_container', '/')\n      const mountedTarget = document.querySelector(queryableSelector)\n      expect(mountedTarget.outerHTML).toEqual(queryablePage().outerHTML)\n    })\n\n    it('should update the app on re-mount', () => {\n      app = new Tram()\n\n      app.addRoute('/', queryablePage)\n      app.addRoute('/200', queryablePage.bind(window, 200))\n      app.mount('#tram_test_container', '/')\n      app.mount('#tram_test_container', '/200')\n      const mountedTarget = document.querySelector(queryableSelector)\n      expect(mountedTarget.outerHTML).toEqual(queryablePage(200).outerHTML)\n    })\n  })\n\n  describe('toNode', () => {\n    it('should resolve the path', () => {\n      app = new Tram()\n      app.addRoute('/', successPage)\n      expect(app.toNode('/').outerHTML).toEqual(successPage().outerHTML)\n    })\n\n    it('should have the default state', () => {\n      app = new Tram()\n      app.addRoute('/', counterPage)\n      app.addReducer('counter', counterReducer, counterState)\n      expect(app.toNode('/')).toEqual(counterState)\n    })\n\n    it('should take in a state', () => {\n      app = new Tram()\n      app.addRoute('/', counterPage)\n      expect(app.toNode('/', {counter: counterState})).toEqual(counterState)\n    })\n  })\n\n  describe('toString', () => {\n    it('should return a string', () => {\n      app = new Tram()\n      app.addRoute('/404', errorPage)\n      expect(app.toString('/')).toEqual(errorPage().outerHTML)\n    })\n  })\n\n  describe('html', () => {\n    it('should generate a dom tree', () => {\n      const tramTree = Tram.html()`<div><span></span></div>`\n      const docTree = document.createElement('div')\n      docTree.appendChild(document.createElement('span'))\n      expect(tramTree.outerHTML).toBe(docTree.outerHTML)\n    })\n\n    it('should take in a registry', () => {\n      const foo = () => Tram.html()`<div><span></span></div>`\n      const tramTree = Tram.html({foo})`<foo></foo>`\n      const docTree = document.createElement('div')\n      docTree.appendChild(document.createElement('span'))\n      expect(tramTree.outerHTML).toBe(docTree.outerHTML)\n    })\n  })\n})\n"],"names":["Tram","window","testemPath","location","pathname","describe","app","errorPage","html","successPage","queryablePage","value","queryableSelector","counterReducer","state","action","type","counterPage","counter","queryableCounterPage","counterState","addRoute","toString","toEqual","outerHTML","defaultRoute","not","addReducer","reducers","toNode","path_param","childDiv","document","createElement","id","body","appendChild","getElementById","removeChild","start","mountedTarget","querySelector","innerHTML","store","dispatch","target","mount","bind","tramTree","docTree","toBe","foo"],"mappings":"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"}